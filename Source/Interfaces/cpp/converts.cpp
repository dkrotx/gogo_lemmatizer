#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "../../common/utilit.h"

typedef unsigned char uchar;

uchar kw2[] = {128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,
144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,
160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,
176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,
254,224,225,246,228,229,244,227,245,232,233,234,235,236,237,238,
239,255,240,241,242,243,230,226,252,251,231,248,253,249,247,250,
222,192,193,214,196,197,212,195,213,200,201,202,203,204,205,206,
207,223,208,209,210,211,198,194,220,219,199,216,221,217,215,218};


uchar wk2[] = {128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,
144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,
160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,
176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,
225,226,247,231,228,229,246,250,233,234,235,236,237,238,239,240,
242,243,244,245,230,232,227,254,251,253,255,249,248,252,224,241,
193,194,215,199,196,197,214,218,201,202,203,204,205,206,207,208,
210,211,212,213,198,200,195,222,219,221,223,217,216,220,192,209};

#pragma optimize ("", off)

char wtk2(char c)
{
	
	c&= 0377;
	if(c & 0200)
		c	= wk2[c & 0177];
	return c;
}
char ktw2(char c)
{
	c&= 0377;
	if(c & 0200)
		c	= kw2[c & 0177];
	return c;
}


void WinToKOI82 (string& s)
{
	 int count = s.length();
	 for (int i=0; i< count; i++)
		 s[i] = wtk2(s[i]);
};

void KOI8ToWin2 (string& s)
{
	 int count = s.length();
	 for (int i=0; i< count; i++)
		 s[i] = ktw2(s[i]);
};

#pragma optimize ("", on)
